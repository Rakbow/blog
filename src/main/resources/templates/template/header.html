<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div id="app">
    <div th:fragment="site_header">
        <div th:if="${loginUser == null}">
            <p-menubar :model="NOT_LOGIN_NAVBAR_ITEMS">
                <template #start>
                    <img alt="logo" src="https://img.rakbow.com/common/logo.png" height="30" class="mr-2">
                </template>
                <template #end>
                    <p-button icon="pi pi-search" @click="openSearchPanel"
                              class="p-button-rounded p-button-warning"></p-button>
                </template>
            </p-menubar>
        </div>
        <div th:if="${loginUser != null}">
            <p-menubar :model="LOGIN_NAVBAR_ITEMS">
                <template #start>
                    <img alt="logo" src="https://img.rakbow.com/common/logo.png" height="30" class="mr-2">
                </template>
                <template #end>
                    <p-avatar class="mr-2" th:if="${loginUser != null}" th:image="${loginUser.headerUrl}" size="small"
                              shape="circle"></p-avatar>
                    <p-button icon="pi pi-search" @click="openSearchPanel"
                              class="p-button-rounded p-button-warning"></p-button>
                </template>
            </p-menubar>
        </div>
    </div>
</div>
<script type="module" th:inline="javascript">
    const { createApp, onMounted, ref } = Vue;

    const App = {
        setup() {
            onMounted(() => {

            })
            const domainUrl = DOMAIN_URL;

            const selectedEntity = ref();

            const entityType = ref(ENTITY_TYPE);

            const notLoginNavbarItems = ref(NOT_LOGIN_NAVBAR_ITEMS);

            const loginNavbarItems = ref(LOGIN_NAVBAR_ITEMS);

            return { domainUrl, notLoginNavbarItems, loginNavbarItems, entityType, selectedEntity }
        },
        components: {
            "p-dropdown": primevue.dropdown,
            "p-inputtext": primevue.inputtext,
            "p-button": primevue.button,
            "p-avatar": primevue.avatar,
            "p-menubar": primevue.menubar,
        }
    };

    const routes = [{ path: "/", component: App }];

    const router = VueRouter.createRouter({
        // history: VueRouter.createWebHashHistory(),
        history: VueRouter.createWebHistory(),
        routes
    });

    createApp(App)
        .use(router)
        .use(primevue.config.default)
        .use(primevue.dialogservice)
        .mount("#app");
</script>
</script>
<style>
    .user-header {
        width: 50px;
        height: 50px;
    }
</style>
</body>

</html>